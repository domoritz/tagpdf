% !Mode:: "TeX:UTF-8:Main"
\documentclass{article}

\begin{document}
\ExplSyntaxOn
\prop_new:N\g__tag_role_index_prop
%\ior_open:Nn \g_tmpa_ior {tagpdf-tag-index.def}
%\ior_map_inline:Nn \g_tmpa_ior
%  {
%   \prop_gput:Nnn\g__tag_role_index_prop #1
%  }
%\ior_close:N\g_tmpa_ior 

\intarray_new:Nn \g__tag_parent_child_rel_intarray {6000}

\ior_open:Nn \g_tmpa_ior {tagpdf-parent-child.csv}
\int_zero:N\g_tmpa_int
\seq_new:N\g__tag_role_header_seq
\tl_new:N\l__tag_child_tmpa_tl
\tl_new:N\l__tag_parent_tmpa_tl
\ior_map_inline:Nn \g_tmpa_ior 
  { 
    \int_incr:N\g_tmpa_int     
    \seq_set_from_clist:Nn\l_tmpa_seq { #1 } 
    \int_compare:nNnTF {\g_tmpa_int}=1
     { %header        
       \seq_map_indexed_inline:Nn \l_tmpa_seq
         {
           \prop_gput:Nnn\g__tag_role_index_prop {##2}{##1}           
         }  
       \prop_gput:Nnx\g__tag_role_index_prop {MC}{\int_eval:n{\seq_count:N\l_tmpa_seq+1}}  
       \prop_show:N\g__tag_role_index_prop  
     }
     {
       %rest
       \seq_set_from_clist:Nn\l_tmpa_seq { #1 }
       %\seq_show:N \l_tmpa_seq
       \seq_if_empty:NF \l_tmpa_seq 
        {
         \seq_pop_left:NN\l_tmpa_seq\l_tmpa_tl
         \prop_get:NVN \g__tag_role_index_prop \l_tmpa_tl \l_tmpb_tl
%        %index of child       
         \quark_if_no_value:NT\l_tmpb_tl {\seq_show:N \l_tmpa_seq \tl_show:N\l_tmpa_tl\tl_show:N\l_tmpb_tl}
         \int_set:Nn\l_tmpa_int { \l_tmpb_tl }
         %\int_show:N \l_tmpa_int
         % remove column 2 + 3
         \seq_pop_left:NN\l_tmpa_seq\l_tmpa_tl
         \seq_pop_left:NN\l_tmpa_seq\l_tmpa_tl
         \seq_map_indexed_inline:Nn \l_tmpa_seq 
          {          
           \str_case:nnF {##2}
            {
              { 0..n }
              {
                \intarray_gset:Nnn \g__tag_parent_child_rel_intarray 
                  {100*##1 + \l_tmpa_int }{1}
              }  
              { 0..1 } 
              { 
                \intarray_gset:Nnn \g__tag_parent_child_rel_intarray 
                  {100*##1 + \l_tmpa_int }{2}
              }  
              { 1 } 
              { 
                \intarray_gset:Nnn \g__tag_parent_child_rel_intarray 
                  {100*##1 + \l_tmpa_int }{3}
              }                
              { [a] } 
              { 
                \intarray_gset:Nnn \g__tag_parent_child_rel_intarray 
                  {100*##1 + \l_tmpa_int }{4}
              }  
              { [b] } 
              { 
                \intarray_gset:Nnn \g__tag_parent_child_rel_intarray 
                  {100*##1 + \l_tmpa_int }{5}
              }   
              { c } 
              { 
                \intarray_gset:Nnn \g__tag_parent_child_rel_intarray 
                  {100*##1 + \l_tmpa_int }{6}
              }                 
              { ‡ } 
              { 
                \intarray_gset:Nnn \g__tag_parent_child_rel_intarray 
                  {100*##1 + \l_tmpa_int }{7}
              }                                            
              { ∅* } 
              { \int_show:n{100*##1 + \l_tmpa_int}
                \intarray_gset:Nnn \g__tag_parent_child_rel_intarray 
                  {100*##1 + \l_tmpa_int }{8}
              }                                                                                                     
              { ∅ } 
              { \int_show:n{100*##1 + \l_tmpa_int}
                \intarray_gset:Nnn \g__tag_parent_child_rel_intarray 
                  {100*##1 + \l_tmpa_int }{-1}
              }                 
            }{\show\unknown \tl_show:n{##2} \int_show:N\l_tmpa_int}
         }
     }
     }
  }
\ior_close:N\g_tmpa_ior 
\intarray_show:N \g__tag_parent_child_rel_intarray

%\edef\blub {\intarray_item:Nn \g__tag_parent_child_rel_intarray {1}}\show\blub
\ExplSyntaxOff
\end{document} 